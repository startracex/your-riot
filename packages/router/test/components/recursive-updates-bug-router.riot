<recursive-updates-bug-router>
  <routes base={props.base}>
    <route path="/">
      <recursive-updates-bug148 message={state.message} callbacks={state.callbacks}>
    </route>
  </routes>

  <script>
    import { Routes, Route } from '../../dist/module/index.js'
    import RecursiveUpdatesBug148 from './recursive-updates-bug148.riot'

    export default {
      components: {
        Routes,
        Route,
        RecursiveUpdatesBug148
      },
      state: {
        callbacks: [],
        message: '',
      },
      onBeforeMount() {
        this.state.callbacks.push((message) => {
          this.update({
            message
          })
        })
      }
    }
  </script>
</recursive-updates-bug-router>
